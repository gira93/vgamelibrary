import{d as k,r as h,o as $,c as b,w as x,a as r,b as e,e as O,v as B,f as V,g as E,h as v,t as M,i as R,F as D,j as F,k as y,l as U,n as j,m as q,p as g}from"./index-0f5e497a.js";import{_ as A,P as C}from"./PlatformRepository-3abe7ed2.js";const z={class:"field"},I={class:"control"},L=k({__name:"CreateEditPlatformModal",props:{platformEdit:{}},emits:["closePlatformModal","savePlatformModal"],setup(_,{emit:f}){const a=new C,i=f,s=_,l=h({name:""}),m=async()=>{const{name:o}=l.value;if(o!=="")try{s.platformEdit&&s.platformEdit.id?await a.update(s.platformEdit.id,{name:o}):await a.create({name:o}),i("savePlatformModal")}catch(t){window.alert(t)}};return $(()=>{s.platformEdit&&(l.value.name=s.platformEdit.name)}),(o,t)=>(r(),b(A,{title:o.platformEdit?"Update platform":"Add new platform",confirmText:"Save",cancelText:"Cancel",onCancelModal:t[1]||(t[1]=u=>o.$emit("closePlatformModal")),onConfirmModal:m},{default:x(()=>[e("form",{onSubmit:V(m,["prevent"])},[e("div",z,[t[2]||(t[2]=e("label",{class:"label"},"Platform name",-1)),e("div",I,[O(e("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>l.value.name=u),class:"input",type:"text"},null,512),[[B,l.value.name]])])])],32)]),_:1},8,["title"]))}}),G={key:0},H={key:1},J=k({__name:"DeletePlatformModal",props:{selectedPlatforms:{}},emits:["closeDeletePlatformModal"],setup(_,{emit:f}){const a=new C,i=f,s=_,l=E(()=>s.selectedPlatforms.length<=1),m=async()=>{const o=s.selectedPlatforms.map(t=>t.id).filter(t=>!!t);await a.delete(o),i("closeDeletePlatformModal")};return(o,t)=>(r(),b(A,{title:l.value?"Delete platform":"Delete platforms",confirmText:"Ok",cancelText:"Cancel",onCancelModal:t[0]||(t[0]=u=>o.$emit("closeDeletePlatformModal")),onConfirmModal:m},{default:x(()=>[l.value?(r(),v("span",G," Do you want to remove "+M(o.selectedPlatforms[0].name)+"? ",1)):(r(),v("span",H,"Do you want to remove the selected "+M(o.selectedPlatforms.length)+" platforms?",1))]),_:1},8,["title"]))}}),K={class:"container is-padded-mobile"},Q={class:"columns is-multiline"},W={class:"column is-12 has-text-right"},X=["disabled"],Y={class:"column is-12"},Z={class:"column is-12"},ee={class:"custom-table table is-striped is-fullwidth"},te={class:"custom-table__header-selection"},le={class:"checkbox"},se=["checked"],oe={class:"checkbox"},ae=["value"],ne={class:"has-text-right"},ie=["onClick"],de=["onClick"],ce={class:"icon is-small"},re=["onClick"],me=["onClick"],ue={class:"icon is-small"},ve=k({__name:"Platforms",setup(_){const f=new C,a=R({isAddNewModalOpen:!1,isDeleteModalOpen:!1}),i=h([]),s=h([]),l=h([]),m=E(()=>i.value.length===0?!1:l.value.length===i.value.length),o=async()=>{i.value=await f.index()},t=n=>{n&&o(),s.value=[],a.isAddNewModalOpen=!1},u=n=>{s.value=[{...n}],a.isAddNewModalOpen=!0},P=n=>{s.value=[{...n}],a.isDeleteModalOpen=!0},N=()=>{s.value=i.value.filter(n=>n.id&&l.value.includes(n.id)),a.isDeleteModalOpen=!0},S=()=>{o(),s.value=[],l.value=[],a.isDeleteModalOpen=!1},T=()=>{m.value?l.value=[]:l.value=i.value.map(n=>n.id).filter(n=>!!n)};return $(()=>{o()}),(n,d)=>{const w=U("font-awesome-icon");return r(),v(D,null,[e("div",K,[e("div",Q,[e("div",W,[e("button",{class:"button is-danger mr-3",onClick:N,disabled:l.value.length===0}," Delete selection ",8,X),e("button",{class:"button is-primary",onClick:d[0]||(d[0]=()=>a.isAddNewModalOpen=!0)}," Add new ")]),e("div",Y,"Total items: "+M(i.value.length),1),e("div",Z,[e("table",ee,[e("thead",null,[e("tr",null,[e("th",te,[e("label",le,[e("input",{type:"checkbox",checked:m.value,onChange:T},null,40,se)])]),d[3]||(d[3]=e("th",null,"Platform",-1)),d[4]||(d[4]=e("th",{class:"custom-table__header-actions has-text-right"},"Actions",-1))])]),e("tbody",null,[(r(!0),v(D,null,F(i.value,c=>(r(),v("tr",{key:c.id,class:j({"is-selected":c.id&&l.value.includes(c.id)})},[e("td",null,[e("label",oe,[O(e("input",{type:"checkbox",value:c.id,"onUpdate:modelValue":d[1]||(d[1]=p=>l.value=p)},null,8,ae),[[q,l.value]])])]),e("td",null,M(c.name),1),e("td",ne,[e("button",{class:"button is-primary is-small is-hidden-touch mr-3",onClick:p=>u(c)}," Edit ",8,ie),e("button",{class:"button is-primary is-small mr-3 is-hidden-desktop",onClick:p=>u(c)},[e("span",ce,[g(w,{icon:"fa-regular fa-pen-to-square"})])],8,de),e("button",{class:"button is-danger is-small is-hidden-touch",onClick:p=>P(c)}," Delete ",8,re),e("button",{class:"button is-danger is-small is-hidden-desktop",onClick:p=>P(c)},[e("span",ue,[g(w,{icon:"fa-regular fa-trash-can"})])],8,me)])],2))),128))])])])])]),a.isAddNewModalOpen?(r(),b(L,{key:0,platformEdit:s.value[0],onClosePlatformModal:t,onSavePlatformModal:d[2]||(d[2]=c=>t(!0))},null,8,["platformEdit"])):y("",!0),a.isDeleteModalOpen?(r(),b(J,{key:1,selectedPlatforms:s.value,onCloseDeletePlatformModal:S},null,8,["selectedPlatforms"])):y("",!0)],64)}}});export{ve as default};
